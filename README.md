# Snow Cloud

Snow Cloud is a free and open-source file server and management system. Snow Cloud works very similarly to other cloud file providers, like iCloud, OneDrive, or Google Drive. Snow Cloud is distributed under the AGPL v3 license.

## About

### Repo
The monorepo for Snow Cloud is configured and managed by [Turborepo](https://turborepo.org/).

[TypeScript](https://www.typescriptlang.org/) is primarily used across Snow Cloud's source code to ensure type-safety and to reduce the number of bugs.

### Client
The client (frontend) site is built using [Next.js](https://nextjs.org) ([React](https://reactjs.org/)), [tRPC](https://trpc.io/docs/v10/), [TanStack Query](https://tanstack.com/query/v4), and [Tailwind](https://tailwindcss.com/). 

### Server
The server (backend) is built using [Fastify](https://www.fastify.io/), [Prisma](https://www.prisma.io/), [tRPC](https://trpc.io/docs/v10/), [zod](https://www.npmjs.com/package/zod), [jsonwebtoken](https://www.npmjs.com/package/jsonwebtoken), and [argon2](https://www.npmjs.com/package/argon2). 

### Client-Server Communication
Snow Cloud uses [tRPC v10](https://trpc.io/docs/v10/) to facilitate communication between the client and server. tRPC guarantees type-safety between the client and server.

### Authentication Mechanism

Snow Cloud uses a token-based authentication system. On login, this server return an access-token and refresh-token. The access-token only provides access to protected resources for 15 minutes. After the access-token expires, the client will attempt to fetch a new token by using the refresh-token, which has a much longer lifespan. To prevent the possibility of account compromise due to a stolen refresh-token, this system implements refresh-token rotation and automatic refresh-token reuse detection. This mechanism is outlined in [this blog post](https://auth0.com/blog/refresh-tokens-what-are-they-and-when-to-use-them/) by the team at Auth0.

***

# Turborepo Info (Autogenerated by Turborepo)

## What's inside?

This turborepo uses [npm](https://www.npmjs.com/) as a package manager. It includes the following packages/apps:

### Apps and Packages

- `client`: A [Next.js](https://nextjs.org) app
- `server`: A [Fastify](https://www.fastify.io/) api server
- `eslint-config-custom`: `eslint` configurations (includes `eslint-config-next` and `eslint-config-prettier`)
- `tsconfig`: `tsconfig.json`s used throughout the monorepo

Each package/app is 100% [TypeScript](https://www.typescriptlang.org/).

### Utilities

This turborepo has some additional tools setup:

- [TypeScript](https://www.typescriptlang.org/) for static type checking
- [ESLint](https://eslint.org/) for code linting
- [Prettier](https://prettier.io) for code formatting

### Build

To build all apps and packages, run the following command:

```
cd snow-cloud
npm run build
```

### Develop

To develop all apps and packages, run the following command:

```
cd snow-cloud
npm run dev
```

### Remote Caching

Turborepo can use a technique known as [Remote Caching](https://turborepo.org/docs/core-concepts/remote-caching) to share cache artifacts across machines, enabling you to share build caches with your team and CI/CD pipelines.

By default, Turborepo will cache locally. To enable Remote Caching you will need an account with Vercel. If you don't have an account you can [create one](https://vercel.com/signup), then enter the following commands:

```
cd snow-cloud
npx turbo login
```

This will authenticate the Turborepo CLI with your [Vercel account](https://vercel.com/docs/concepts/personal-accounts/overview).

Next, you can link your Turborepo to your Remote Cache by running the following command from the root of your turborepo:

```
npx turbo link
```

## Useful Links (Turborepo Docs)

Learn more about the power of Turborepo:

- [Pipelines](https://turborepo.org/docs/core-concepts/pipelines)
- [Caching](https://turborepo.org/docs/core-concepts/caching)
- [Remote Caching](https://turborepo.org/docs/core-concepts/remote-caching)
- [Scoped Tasks](https://turborepo.org/docs/core-concepts/scopes)
- [Configuration Options](https://turborepo.org/docs/reference/configuration)
- [CLI Usage](https://turborepo.org/docs/reference/command-line-reference)
